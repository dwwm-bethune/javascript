<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fonctions</title>
</head>
<body>
    <h1 id="moulin"></h1>

    <script>
        /* une fonction permet d'organiser son code.
        * Une fonction doit être définie et peut-être appelée 
        * Elle évite le code répétitif et parfois, elle renvoie un résultat
        * Si la fonction ne renvoie pas de résultat, on appelle ça une procédure
        */

        function click (element, callback){
            dom(element).addEventListener('click' , callback);
        }

        function dom(element){
            return document.querySelector(element);
        }

        function moulin (ingredient) {
            console.log(ingredient);
            console.log('toto'); // Fais quelque chose

            if (ingredient == 'cacao'){
                return 'Impossible'; // Le return arrête la fonction
            }

            return 'Je transforme le ' + ingredient;; // Retourne quelque chose que je peux afficher plus tard
        }

        console.log(moulin('blé').toUpperCase());
        console.log(moulin('avoine')+' et '+moulin('colza'));
        console.log(moulin('cacao'));
        document.getElementById('moulin').textContent = moulin ('seigle');
        dom('#moulin').textContent = moulin('seigle');

        click('#moulin', function (){
            alert('ok chef');
        })

        // la portée des variables

        var prenom ='fiorella';
        console.log(prenom);

        mondePerdu();

        function mondePerdu(){ // Chaque fonction a sons "scope" , sa portée
            var nom = 'Mota'; // Accessible uniquement dans la fonction
            console.log(prenom); // Prenom est accessible de partout
            prenom = 'Matthieu'

            function mondeEncorePlusPerdu (){
                        console.log(prenom +' '+ nom);
                        covid = true; // Cette variable est globale et accessible de partout
                    }

            mondeEncorePlusPerdu();
        }

        

        console.log(prenom); // Matthieu
        console.log(covid); // Affiche true
        // console.log(nom);  
       // mondeEncorePlusPerdu();

       // En js en 2022 , on peut faire des var, des let et des const...
       // Le let bloque la variable dans un if , for ou while...
       const PI = 3.14; // Une constante ne varie jamais
       var i = 45;

       for(let i =0; i < 10 ; i++){
           console.log(i);
       }
       console.log(i); // sans let , i vaut 10 . Avec let , i vaut 45

       //Les fonctions fléchées.. sont juste un raccourci pour écrire une fonction
       let moulin2 = (ingredient) => 'Je tranforme le ' + ingredient;

       let moulin3 = (ingredient) => {
           console.log(ingredient);
           return 'toto';
       };


       // La template de string
       let moulin4 = (ingredient) => `Je transforme le ${ingredient}`; 

       console.log(moulin2('blé'));
       console.log(moulin3('blé'));
       console.log(moulin4('blé'));

    </script>
</body>
</html>